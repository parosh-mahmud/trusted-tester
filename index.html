<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trusted Tester v5.1.3 - Section 508 Conformance Testing</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/test-interface.css">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="main-header">
            <div class="header-content">
                <h1>üîç Trusted Tester Conformance Test Process</h1>
                <p>Section 508 Testing Tool - Version 5.1.3 (December 2023)</p>
                <div class="header-meta">
                    <span class="badge">DHS Methodology</span>
                    <span class="badge">WCAG 2.0 Level AA</span>
                    <span class="badge">Revised Section 508</span>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="test-navigation">
            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="testing">üìã Testing</button>
                <button class="nav-tab" data-tab="review">üìä Review</button>
                <button class="nav-tab" data-tab="report">üìÑ Report</button>
                <button class="nav-tab" data-tab="reference">üìö Reference</button>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Testing Tab -->
            <div class="tab-content active" id="testing-tab">
                <div class="testing-layout">
                    <!-- Test Categories Panel -->
                    <aside class="test-categories">
                        <h2>Test Categories</h2>
                        <div class="category-list" id="categoryList">
                            <!-- Categories will be populated dynamically -->
                        </div>
                        <div class="test-progress">
                            <h3>Overall Progress</h3>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                            <span class="progress-text" id="progressText">0/0 Tests Complete</span>
                        </div>
                    </aside>

                    <!-- Test Execution Panel -->
                    <section class="test-execution">
                        <div class="test-header">
                            <h2 id="currentTestTitle">Select a Test to Begin</h2>
                            <div class="test-meta" id="testMeta"></div>
                        </div>

                        <!-- URL Input -->
                        <div class="url-input-section">
                            <label for="testUrl">Web Page URL:</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <input type="url" id="testUrl" placeholder="https://example.com/page-to-test" style="flex: 1;">
                                <button onclick="loadPage()" class="btn-primary">Load Page</button>
                                <button id="run-automated-scan" onclick="runAutomatedScan()" class="btn-success" disabled style="white-space: nowrap;">üöÄ Run Automated Scan</button>
                            </div>
                            <div id="scan-progress" style="display: none; margin-top: 10px;">
                                <!-- Progress will be shown here -->
                            </div>
                        </div>

                        <!-- Test Content -->
                        <div class="test-content" id="testContent">
                            <div class="welcome-message">
                                <h3>Welcome to Trusted Tester v5.1.3 - Now with Automated Testing! üöÄ</h3>
                                <p>This tool implements the official DHS Trusted Tester methodology for Section 508
                                    conformance testing with powerful automated scanning capabilities.</p>

                                <div class="quick-start" style="background: #fff3cd; padding: 15px; border-left: 4px solid #ffc107; margin-bottom: 20px;">
                                    <h4 style="margin-top: 0;">‚ö†Ô∏è IMPORTANT: HTTP Server Required</h4>
                                    <p style="margin-bottom: 10px;">This tool <strong>MUST be served via HTTP server</strong> (not file://) due to browser CORS security.</p>
                                    <p style="margin-bottom: 5px;"><strong>Quick Start:</strong></p>
                                    <ol style="margin-bottom: 10px;">
                                        <li>Run: <code>python3 -m http.server 8000</code></li>
                                        <li>Open: <code>http://localhost:8000</code></li>
                                        <li>Or use <code>START_SERVER.sh</code> (Linux/Mac) or <code>START_SERVER.bat</code> (Windows)</li>
                                    </ol>
                                    <p style="margin: 0; font-size: 0.9em; color: #856404;">If you see CORS errors, you're using file:// protocol. Switch to HTTP server!</p>
                                </div>

                                <div class="quick-start">
                                    <h4>üéØ Automated Testing:</h4>
                                    <ol>
                                        <li>Enter the URL of the page to test (try <code>test-page.html</code> for demo)</li>
                                        <li>Click <strong>"Run Automated Scan"</strong> - Done! üéâ</li>
                                        <li>Review automated results in the Review tab</li>
                                        <li>Generate a comprehensive conformance report</li>
                                    </ol>
                                    <p><strong>üí° Tip:</strong> Use the included <code>test-page.html</code> to try the scanner with a sample page containing common accessibility issues.</p>
                                </div>

                                <div class="quick-start">
                                    <h4>üìã Manual Testing Mode:</h4>
                                    <ol>
                                        <li>Enter the URL and click "Load Page"</li>
                                        <li>Select a test category from the left panel</li>
                                        <li>Follow the step-by-step test instructions</li>
                                        <li>Record your findings (Pass/Fail/DNA)</li>
                                        <li>Generate a conformance report</li>
                                    </ol>
                                </div>

                                <div class="test-overview">
                                    <h4>‚ú® Features:</h4>
                                    <ul>
                                        <li><strong>20 Test Categories</strong> covering all WCAG 2.1 Level AA criteria</li>
                                        <li><strong>Automated Scanning</strong> powered by axe-core accessibility engine</li>
                                        <li><strong>Smart Violation Detection</strong> with detailed recommendations</li>
                                        <li><strong>WCAG & Section 508 Compliance</strong> reporting</li>
                                        <li><strong>Export</strong> to PDF, Excel, JSON formats</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Test Controls -->
                        <div class="test-controls" id="testControls" style="display: none;">
                            <button onclick="markPass()" class="btn-pass">‚úÖ Pass</button>
                            <button onclick="markFail()" class="btn-fail">‚ùå Fail</button>
                            <button onclick="markDNA()" class="btn-dna">‚ûñ Does Not Apply</button>
                            <button onclick="markNotTested()" class="btn-not-tested">‚è≠Ô∏è Not Tested</button>
                        </div>

                        <!-- Issue Documentation -->
                        <div class="issue-form" id="issueForm" style="display: none;">
                            <h3>Document Issue</h3>
                            <textarea id="issueDescription" placeholder="Describe the issue found..."></textarea>
                            <input type="text" id="issueLocation"
                                placeholder="Element/Location (e.g., main navigation menu)">
                            <select id="issueSeverity">
                                <option value="">Select Severity</option>
                                <option value="critical">Critical</option>
                                <option value="major">Major</option>
                                <option value="minor">Minor</option>
                            </select>
                            <button onclick="saveIssue()" class="btn-primary">Save Issue</button>
                        </div>
                    </section>

                    <!-- Tools Panel -->
                    <aside class="tools-panel">
                        <h2>Testing Tools</h2>

                        <div class="tool-section">
                            <h3>üõ†Ô∏è Required Tools</h3>
                            <ul class="tool-list">
                                <li><a href="#" onclick="openANDI()">ANDI</a></li>
                                <li><a href="#" onclick="openCCA()">Colour Contrast Analyser</a></li>
                                <li><a href="#" onclick="openDevTools()">Browser DevTools</a></li>
                            </ul>
                        </div>

                        <div class="tool-section">
                            <h3>‚å®Ô∏è Keyboard Testing</h3>
                            <div class="keyboard-guide">
                                <p><kbd>Tab</kbd> - Navigate forward</p>
                                <p><kbd>Shift+Tab</kbd> - Navigate backward</p>
                                <p><kbd>Enter</kbd> - Activate button/link</p>
                                <p><kbd>Space</kbd> - Check box/button</p>
                                <p><kbd>Arrow Keys</kbd> - Radio/Menu</p>
                            </div>
                        </div>

                        <div class="tool-section">
                            <h3>üìù Quick Notes</h3>
                            <textarea id="quickNotes" placeholder="Testing notes..."></textarea>
                        </div>
                    </aside>
                </div>
            </div>

            <!-- Review Tab -->
            <div class="tab-content" id="review-tab">
                <div class="review-container">
                    <h2>Test Results Review</h2>
                    <div class="results-summary" id="resultsSummary">
                        <!-- Results will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Report Tab -->
            <div class="tab-content" id="report-tab">
                <div class="report-container">
                    <h2>Conformance Report</h2>
                    <div class="report-actions">
                        <button onclick="generateReport()" class="btn-primary">Generate Report</button>
                        <button onclick="exportReport('pdf')" class="btn-secondary">Export PDF</button>
                        <button onclick="exportReport('excel')" class="btn-secondary">Export Excel</button>
                    </div>
                    <div class="report-content" id="reportContent">
                        <!-- Report will be generated here -->
                    </div>
                </div>
            </div>

            <!-- Reference Tab -->
            <div class="tab-content" id="reference-tab">
                <div class="reference-container">
                    <h2>Testing Reference</h2>
                    <div class="reference-search">
                        <input type="text" id="referenceSearch"
                            placeholder="Search tests, WCAG criteria, or keywords...">
                    </div>
                    <div class="reference-content" id="referenceContent">
                        <!-- Reference content will be populated -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="js/test-database.js?v=3"></script>
    <script src="js/test-processes.js?v=3"></script>
    <script src="js/evaluation-engine.js?v=2"></script>
    <script src="js/report-generator.js?v=2"></script>
    <script src="js/automation-engine.js?v=2"></script>
    <script src="js/main.js?v=4"></script>
</body>

</html>